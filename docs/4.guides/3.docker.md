# 使用 Docker 容器部署项目

使用 Docker 来部署项目可以省去环境配置的麻烦，最重要的是可以使用 k8s 进行大规模负载

以下简单介绍如何构建一个 zenweb Docker 镜像

在项目文件夹下创建文件 `Dockerfile`

```bash title="Dockerfile"
# 编译 TS 代码
FROM node:16-slim AS build
COPY . .
RUN npm install && npm run build && rm -fr node_modules && npm install --production

# 创建 app 项目
FROM node:16-slim
WORKDIR /home/webapp

# 设置默认环境变量
ENV NODE_ENV=production
ENV TZ=Asia/Shanghai

# 只复制必要的文件
COPY --from=0 package.json .
COPY --from=0 node_modules/ node_modules/
COPY --from=0 app/ app/

# 暴露服务端口
EXPOSE 7001

# 项目启动命令
CMD [ "npm", "start" ]
```

执行构建命令构建镜像文件

```bash
docker build -t myweb .
```

测试镜像是否可以运行

```bash
docker run --rm -p 7001:7001 myweb
```
