# ratelimit - 请求频次限制

[ZenWeb](https://www.npmjs.com/package/zenweb)

本模块用于请求频次限制，防恶意CC请求攻击。

## 安装

```sh
$ yarn add @zenweb/ratelimit
```

## 配置

`src/index.ts`

```ts
import { create } from 'zenweb';
import ratelimit, { clientIpLimitRule } from '@zenweb/ratelimit';

create()

.setup(ratelimit({
  rules: [
    /**
     * 客户端 IP 请求量限制
     */
    clientIpLimitRule({
      ignores: [],
      window: 3 * 1000,
      limit: 1,
    }),
    /**
     * 自定义规则
     */
    {
      window: 60 * 1000, // 60 秒内
      limit: 10, // 允许请求 10 次
      key(ctx) {
        return 'host:' + ctx.host; // 限制请求域名
      }
    },
  ]
}))

.start();
```
